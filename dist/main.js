!function(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)e.d(s,n,function(i){return t[i]}.bind(null,n));return s},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){"use strict";e.r(i);var s=function(){var t=4022871197,i=function(i){i=i.toString();for(var e=0;e<i.length;e++){var s=.02519603282416938*(t+=i.charCodeAt(e));s-=t=s>>>0,t=(s*=t)>>>0,t+=4294967296*(s-=t)}return 2.3283064365386963e-10*(t>>>0)};return i.version="Mash 0.9",i};var n=function(){return function(t){var i=4294967087,e=4294944443,n=12345,h=12345,r=123,o=12345,a=12345,c=123;0===t.length&&(t=[+new Date]);for(var l=s(),d=0;d<t.length;d++)n+=4294967296*l(t[d]),h+=4294967296*l(t[d]),r+=4294967296*l(t[d]),o+=4294967296*l(t[d]),a+=4294967296*l(t[d]),c+=4294967296*l(t[d]);n%=i,h%=i,r%=i,o%=e,a%=e,c%=e,l=null;var u=function(){var t,i,e=4294967087,s=4294944443;return t=1403580*h-810728*n,(t-=(t/e|0)*e)<0&&(t+=e),n=h,h=r,r=t,i=527612*c-1370589*o,(i-=(i/s|0)*s)<0&&(i+=s),o=a,a=c,c=i,t<=i?t-i+e:t-i},f=function(){return 2.3283064365386963e-10*u()};return f.uint32=u,f.fract53=function(){return f()+1.1102230246251565e-16*(2097151&u())},f.version="MRG32k3a 0.9",f.args=t,f}(Array.prototype.slice.call(arguments))};class h{constructor(t,i){this.x=t,this.y=i}div(t){return new h(this.x/t,this.y/t)}idiv(t){this.x/=t,this.y/=t}mul(t){return new h(this.x*t,this.y*t)}imul(t){this.x*=t,this.y*=t}limit(t){if(this.mag()>t){var i=this.unit();return new h(i.x*t,i.y*t)}return this}ilimit(t){if(this.mag()>t){var i=this.unit();this.x=i.x*t,this.y=i.y*t}}mag(){return Math.sqrt(this.x*this.x+this.y*this.y)}unit(){var t=this.mag();return new h(this.x/t,this.y/t)}add(t){return new h(this.x+t.x,this.y+t.y)}iadd(t){this.x+=t.x,this.y+=t.y}sub(t){return new h(this.x-t.x,this.y-t.y)}isub(t){this.y-=t.x,this.y-=t.y}euc2d(t){return Math.sqrt((this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y))}}var r=h;let o={bird_box:30,prng:null,bird_length:27,bird_wingspan:36};o.bird_viewrange=o.bird_length*o.bird_wingspan/4,o.bird_obstaclerange=12*o.bird_length,o.bird_neighborhood=o.bird_viewrange,o.bird_separaterange=o.bird_neighborhood/2.5,o.debug=!1,o.effect={separate:1,cohesion:.75,align:.7,wander:1,avoid:1},o.population=0,o.flock=null;var a=o;var c=class{constructor(t){this.ctx=t}draw(){this.ctx.fillStyle="#009393",this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(0,8.695),this.ctx.lineTo(26.338,8.695),this.ctx.lineTo(26.338,0),this.ctx.lineTo(0,0),this.ctx.closePath(),this.ctx.fill(),this.ctx.fillStyle="#009393",this.ctx.beginPath(),this.ctx.moveTo(0,27.173),this.ctx.lineTo(0,35.972),this.ctx.lineTo(26.338,35.972),this.ctx.lineTo(26.338,27.173),this.ctx.lineTo(0,27.173),this.ctx.closePath(),this.ctx.fill(),this.ctx.fillStyle="#009393",this.ctx.beginPath(),this.ctx.moveTo(8.34,9.575),this.ctx.lineTo(0,9.575),this.ctx.lineTo(4.829,17.494),this.ctx.lineTo(13.168,17.494),this.ctx.lineTo(8.34,9.575),this.ctx.closePath(),this.ctx.fill(),this.ctx.fillStyle="#009393",this.ctx.beginPath(),this.ctx.moveTo(4.829,18.374),this.ctx.lineTo(0,26.293),this.ctx.lineTo(8.34,26.293),this.ctx.lineTo(13.168,18.374),this.ctx.lineTo(4.829,18.374),this.ctx.closePath(),this.ctx.fill()}};var l=function(t,i,e,s,n,h,o){this.dead=!1,this.pos=new r(i,e),this.maxSpeed=n||1,this.speedLimit=1.5*this.maxSpeed,this.maxSteeringForce=h||.065,this.viewingAngle=o?o*(Math.PI/180):Math.PI/180*270,this.canvas=t,s*=Math.PI/180,this.vel=new r(Math.cos(s),Math.sin(s)),this.acc=new r(0,0),this.wandering=!1,this.simulate=function(t){this.flock(t),this.update()},this.update=function(){this.vel.add(this.acc).mag()>0&&this.vel.iadd(this.acc),this.vel.mag()>0&&this.vel.ilimit(this.speedLimit),this.pos.x+=this.vel.x,this.pos.y-=this.vel.y,this.acc.x=0,this.acc.y=0},this.flock=function(t){var i=this.separation(t),e=this.alignment(t),s=this.cohesion(t);this.acc.iadd(i.mul(a.effect.separate)),this.acc.iadd(e.mul(a.effect.align)),this.acc.iadd(s.mul(a.effect.cohesion)),0==this.acc.mag()?(this.acc=this.wander().mul(a.effect.wander),this.wandering=!0):this.wandering=!1},this.wander=function(){var t=this.vel.unit(),i=this.pos.add(t.mul(50)),e=-Math.PI/2+a.prng()*Math.PI,s=17*Math.cos(e),n=17*Math.sin(-e),h=i.add(new r(s,n));return this.seek(h,this.pos)},this.seek=function(t,i){var e=t.sub(i);return e.mag()>0?((e=e.unit()).imul(this.maxSpeed),e.sub(this.vel).limit(this.maxSteeringForce)):new r(0,0)},this.inBoidViewRange=function(t){var i=Math.atan2(-this.vel.y,this.vel.x),e=t.pos.x-this.pos.x,s=this.canvas.height-t.pos.y-(this.canvas.height-this.pos.y),n=e*Math.cos(i)-s*Math.sin(i),h=e*Math.sin(i)+s*Math.cos(i),r=Math.atan2(-h,n),o=-this.viewingAngle/2;return r<+this.viewingAngle/2&&r>o},this.separation=function(t){for(var i=a.bird_separaterange,e=new r(0,0),s=new r(0,0),n=0,h=t.length-1;h>=0;h--){var o=t[h];if(this!=o){var c=this.pos.euc2d(o.pos);c<i&&this.inBoidViewRange(o)&&(s=(s=this.pos.sub(o.pos)).unit().div(c),e.iadd(s),n++)}}return n>0&&(e.idiv(n),e.ilimit(this.maxSteeringForce)),e},this.alignment=function(t){for(var i=a.bird_neighborhood,e=new r(0,0),s=0,n=t.length-1;n>=0;n--){var h=t[n];h!=this&&this.pos.euc2d(h.pos)<i&&this.inBoidViewRange(h)&&(e.iadd(h.vel),s++)}return s>0&&(e.idiv(s),e.ilimit(this.maxSteeringForce)),e},this.cohesion=function(t){for(var i=a.bird_neighborhood,e=new r(0,0),s=0,n=t.length-1;n>=0;n--){var h=t[n];this!=h&&this.pos.euc2d(h.pos)<i&&this.inBoidViewRange(h)&&(e.iadd(h.pos),s++)}return s>0&&(e.idiv(s),e.ilimit(this.maxSteeringForce)),e},this.draw=function(t,i,e){let s=new c(t);if(!this.dead){this.pos.x<-40&&(this.pos.x=i),this.pos.x>i+40&&(this.pos.x=-40),this.pos.y<-40&&(this.pos.y=e),this.pos.y>e+40&&(this.pos.y=0);var n=Math.atan2(-this.vel.y,this.vel.x);t.save(),t.translate(this.pos.x,this.pos.y),t.rotate(n),t.beginPath(),s.draw(),t.closePath(),t.fill(),t.restore()}}};var d=class{constructor(){this.boids=[],this.obstacles=[]}addBoid(t){this.boids.push(t),a.population++}update(){for(var t,i=this.boids.length-1;i>=0;i--)this.boids[i].simulate(this.boids),this.boids[i].dead&&(t=this.boids[i],this.boids[i]=this.boids[this.boids.length-1],this.boids[this.boids.length-1]=t)}draw(t,i,e){var s,n=[];for(s=this.boids.length-1;s>=0;s--){this.boids[s].draw(t,i,e);var h=this.boids[s].vel.mag();n.push(h)}}};var u=class{constructor(){}startBoidSimulation(){let t=document.getElementById("main"),i=t.getContext("2d");a.prng=new n,document.body.style.overflow="hidden",window.addEventListener("resize",r,!1),a.flock=new d,r(),window.setInterval(function(){a.flock.update(),h()},1e3/30);for(var e=0;e<40;e++){var s=new l(t,Math.random()*t.width,Math.random()*t.height,360*a.prng(),1*Math.random()+1);a.flock.addBoid(s)}function h(){i.clearRect(0,0,t.width,t.height),i.fillStyle="#f6f6f6",i.strokeStyle="#aecbf6",a.flock.draw(i,t.width,t.height)}function r(){t.width=window.innerWidth,t.height=window.innerHeight,h()}}};window.setTimeout(()=>{(new u).startBoidSimulation()},300)}]);